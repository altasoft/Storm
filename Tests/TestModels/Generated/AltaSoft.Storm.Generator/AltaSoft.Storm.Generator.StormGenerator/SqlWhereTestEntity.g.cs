//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by 'AltaSoft Storm ORM Generator'.
//     Changes to this file may cause incorrect behavior and will be lost if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

#pragma warning disable IDE0001, IDE0002, IDE0004, IDE0005, IDE0051, IDE1006, CS0612, CS8618, CA2255
// ReSharper disable all

#nullable enable

using AltaSoft.Storm.Attributes;
using AltaSoft.Storm.TestModels.VeryBadNamespace;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Data.Common;
using System.Linq;
using System.Linq.Expressions;
using System.Runtime.CompilerServices;
using System.Threading;
using System.Threading.Tasks;
using AltaSoft.Storm;
using AltaSoft.Storm.Crud;
using AltaSoft.Storm.Interfaces;
using AltaSoft.Storm.Exceptions;
using AltaSoft.Storm.Extensions;

namespace AltaSoft.Storm.TestModels;

// UpdateMode: ChangeTracking
// 0. (.SqlWhereTestEntity - Table, ChangeTracking
public partial record SqlWhereTestEntity : IDataBindable, ITrackingObject
{
    /// <summary>
    /// Default constructor.
    /// </summary>
    public SqlWhereTestEntity()
    {
    }

    /// <summary>
    /// Initializes a new instance with the values from the specified DbDataReader and updates the index.
    /// </summary>
    /// <param name="dr">The DbDataReader object containing the data.</param>
    /// <param name="partialLoadFlags">The PartialLoadFlags that used when loading this instance from database.</param>
    /// <param name="idx">The reference to the index.</param>
    #if NET7_0_OR_GREATER
    [System.Diagnostics.CodeAnalysis.SetsRequiredMembers]
    #endif
    protected internal SqlWhereTestEntity(StormDbDataReader dr, uint partialLoadFlags, ref int idx)
    {
        __loadingFlags = partialLoadFlags;
        StringColor = global::AltaSoft.Storm.TestModels.RgbColorExt.FromDbString(dr.GetString(idx++));
        IntColor = (AltaSoft.Storm.TestModels.RgbColor)(sbyte)dr.GetInt8(idx++);
        IntColorN = (AltaSoft.Storm.TestModels.RgbColor?)(sbyte?)dr.GetInt8OrNull(idx++);
        CustomerId = (AltaSoft.Storm.TestModels.VeryBadNamespace.CustomerId)(long)dr.GetInt64(idx++);
        CustomerIdN = (AltaSoft.Storm.TestModels.VeryBadNamespace.CustomerId?)(long?)dr.GetInt64OrNull(idx++);
        IntValue = (int)dr.GetInt32(idx++);
        IntValueN = (int?)dr.GetInt32OrNull(idx++);
        StringName = (string?)dr.GetStringOrNull(idx++);
        StringNameN = (string?)dr.GetStringOrNull(idx++);
        Ccy = (AltaSoft.Storm.TestModels.VeryBadNamespace.CurrencyId)(string)dr.GetString(idx++);
        CcyN = (AltaSoft.Storm.TestModels.VeryBadNamespace.CurrencyId?)(string?)dr.GetStringOrNull(idx++);
        BoolValue = (bool)dr.GetBoolean(idx++);
        BoolValueN = (bool?)dr.GetBooleanOrNull(idx++);
    }


    /// <inheritdoc />
    public void __SetAutoIncValue(StormDbDataReader dr, int idx)
    {
    }

    /// <inheritdoc />
    public void __AddDetailRow(StormColumnDef column, object row)
    {
        // No master/detail properties
    }

    /// <summary>
    /// Represents a set of flags that can be used to specify partial loading options.
    /// </summary>
    [Flags]
    public enum PartialLoadFlags : uint
    {
        Basic = 0
    }

    /// <summary>
    /// Enum representing different options for ordering data.
    /// </summary>
    public enum OrderBy
    {
        StringColor = 1,
        StringColor_Desc = -1,
        IntColor = 2,
        IntColor_Desc = -2,
        IntColorN = 3,
        IntColorN_Desc = -3,
        CustomerId = 4,
        CustomerId_Desc = -4,
        CustomerIdN = 5,
        CustomerIdN_Desc = -5,
        IntValue = 6,
        IntValue_Desc = -6,
        IntValueN = 7,
        IntValueN_Desc = -7,
        StringName = 8,
        StringName_Desc = -8,
        StringNameN = 9,
        StringNameN_Desc = -9,
        Ccy = 10,
        Ccy_Desc = -10,
        CcyN = 11,
        CcyN_Desc = -11,
        BoolValue = 12,
        BoolValue_Desc = -12,
        BoolValueN = 13,
        BoolValueN_Desc = -13
    }

    /// <summary>
    /// Do not order queried data.
    /// </summary>
    public const OrderBy[]? Unordered = default;

    private readonly uint? __loadingFlags;
    /// <inheritdoc />
    [EditorBrowsable(EditorBrowsableState.Never)]
    public uint? __GetLoadingFlags() => __loadingFlags;

    /// <inheritdoc />
    [EditorBrowsable(EditorBrowsableState.Never)]
    public (StormColumnDef column, object? value)[] __GetColumnValues()
    {
        var columnDefs = SqlWhereTestEntityStormController.__columnDefs;

        return [
            (columnDefs[0], global::AltaSoft.Storm.TestModels.RgbColorExt.ToDbString(StringColor)),
            (columnDefs[1], (sbyte)IntColor),
            (columnDefs[2], (sbyte?)IntColorN),
            (columnDefs[3], (long)CustomerId),
            (columnDefs[4], (long?)CustomerIdN),
            (columnDefs[5], IntValue),
            (columnDefs[6], IntValueN),
            (columnDefs[7], StringName),
            (columnDefs[8], StringNameN),
            (columnDefs[9], (string)Ccy),
            (columnDefs[10], (string?)CcyN),
            (columnDefs[11], BoolValue),
            (columnDefs[12], BoolValueN)
        ];
    }

    #region Change Tracking Support

    /// <inheritdoc />
    public virtual (string propertyName, IChangeTrackable? value)[] __TrackableMembers()
    {
return [];
    }
    protected bool _isChangeTrackingActive;
    protected ChangeTrackingStateMachine? _changeTrackingStateMachine;
    /// <inheritdoc />
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public bool IsChangeTrackingActive() => _isChangeTrackingActive;
    /// <inheritdoc />
    public void StartChangeTracking() { (_changeTrackingStateMachine ??= new(this)).StartChangeTracking(); _isChangeTrackingActive = true; }
    /// <inheritdoc />
    public void AcceptChanges(bool stopTracking = true) { _changeTrackingStateMachine?.AcceptChanges(stopTracking); _isChangeTrackingActive = !stopTracking; }
    /// <inheritdoc />
    public bool IsDirty() => _changeTrackingStateMachine?.IsDirty() ?? false;
    /// <inheritdoc />
    public IReadOnlySet<string> __GetChangedPropertyNames() => _changeTrackingStateMachine is null ? ChangeTrackingStateMachine.EmptyStringSet : _changeTrackingStateMachine.__GetChangedPropertyNames();
    private void __PropertySet_StringColor(ref AltaSoft.Storm.TestModels.RgbColor newValue, ref AltaSoft.Storm.TestModels.RgbColor oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(StringColor), newValue); }
    private void __PropertySet_IntColor(ref AltaSoft.Storm.TestModels.RgbColor newValue, ref AltaSoft.Storm.TestModels.RgbColor oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(IntColor), newValue); }
    private void __PropertySet_IntColorN(ref AltaSoft.Storm.TestModels.RgbColor? newValue, ref AltaSoft.Storm.TestModels.RgbColor? oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(IntColorN), newValue); }
    private void __PropertySet_CustomerId(ref AltaSoft.Storm.TestModels.VeryBadNamespace.CustomerId newValue, ref AltaSoft.Storm.TestModels.VeryBadNamespace.CustomerId oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(CustomerId), newValue); }
    private void __PropertySet_CustomerIdN(ref AltaSoft.Storm.TestModels.VeryBadNamespace.CustomerId? newValue, ref AltaSoft.Storm.TestModels.VeryBadNamespace.CustomerId? oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(CustomerIdN), newValue); }
    private void __PropertySet_IntValue(ref int newValue, ref int oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(IntValue), newValue); }
    private void __PropertySet_IntValueN(ref int? newValue, ref int? oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(IntValueN), newValue); }
    private void __PropertySet_StringName(ref string? newValue, ref string? oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(StringName), newValue); }
    private void __PropertySet_StringNameN(ref string? newValue, ref string? oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(StringNameN), newValue); }
    private void __PropertySet_Ccy(ref AltaSoft.Storm.TestModels.VeryBadNamespace.CurrencyId newValue, ref AltaSoft.Storm.TestModels.VeryBadNamespace.CurrencyId oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(Ccy), newValue); }
    private void __PropertySet_CcyN(ref AltaSoft.Storm.TestModels.VeryBadNamespace.CurrencyId? newValue, ref AltaSoft.Storm.TestModels.VeryBadNamespace.CurrencyId? oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(CcyN), newValue); }
    private void __PropertySet_BoolValue(ref bool newValue, ref bool oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(BoolValue), newValue); }
    private void __PropertySet_BoolValueN(ref bool? newValue, ref bool? oldValue) { if (_isChangeTrackingActive && oldValue != newValue) _changeTrackingStateMachine!.PropertyChanged(nameof(BoolValueN), newValue); }

    #endregion Change Tracking Support
}

/// <summary>
/// 0. StormController for the SqlWhereTestEntity (.SqlWhereTestEntity)
/// </summary>
[StormController(default, "SqlWhereTestEntities", typeof(SqlWhereTestEntity), 0, DbObjectType.Table)]
public sealed class SqlWhereTestEntityStormController : StormControllerBase
{
    public SqlWhereTestEntityStormController(string? schemaName, string objectName, DbObjectType objectType) : base(schemaName, objectName, objectType)
    {
    }

    /// <inheritdoc />
    public override Type StormContext => typeof(TestStormContext);

    [System.Runtime.CompilerServices.ModuleInitializer]
    internal static void Initialize()
    {
        StormControllerBase ctrl;
        ctrl = new SqlWhereTestEntityStormController(null, "SqlWhereTestEntities", DbObjectType.Table);
        StormControllerCache.Add(typeof(SqlWhereTestEntity), 0, ctrl);
    }

    /// <inheritdoc />
    public override IDataBindable Create(StormDbDataReader dr, uint partialLoadFlags, ref int idx)
    {
        return new SqlWhereTestEntity(dr, partialLoadFlags, ref idx);
    }

    /// <inheritdoc />
    public override object? ReadSingleScalarValue(StormDbDataReader dr, string propertyName, ref int idx)
    {
        return propertyName switch
        {
            nameof(SqlWhereTestEntity.StringColor) => global::AltaSoft.Storm.TestModels.RgbColorExt.FromDbString(dr.GetString(idx++)),
            nameof(SqlWhereTestEntity.IntColor) => (AltaSoft.Storm.TestModels.RgbColor)(sbyte)dr.GetInt8(idx++),
            nameof(SqlWhereTestEntity.IntColorN) => (AltaSoft.Storm.TestModels.RgbColor?)(sbyte?)dr.GetInt8OrNull(idx++),
            nameof(SqlWhereTestEntity.CustomerId) => (AltaSoft.Storm.TestModels.VeryBadNamespace.CustomerId)(long)dr.GetInt64(idx++),
            nameof(SqlWhereTestEntity.CustomerIdN) => (AltaSoft.Storm.TestModels.VeryBadNamespace.CustomerId?)(long?)dr.GetInt64OrNull(idx++),
            nameof(SqlWhereTestEntity.IntValue) => (int)dr.GetInt32(idx++),
            nameof(SqlWhereTestEntity.IntValueN) => (int?)dr.GetInt32OrNull(idx++),
            nameof(SqlWhereTestEntity.StringName) => (string?)dr.GetStringOrNull(idx++),
            nameof(SqlWhereTestEntity.StringNameN) => (string?)dr.GetStringOrNull(idx++),
            nameof(SqlWhereTestEntity.Ccy) => (AltaSoft.Storm.TestModels.VeryBadNamespace.CurrencyId)(string)dr.GetString(idx++),
            nameof(SqlWhereTestEntity.CcyN) => (AltaSoft.Storm.TestModels.VeryBadNamespace.CurrencyId?)(string?)dr.GetStringOrNull(idx++),
            nameof(SqlWhereTestEntity.BoolValue) => (bool)dr.GetBoolean(idx++),
            nameof(SqlWhereTestEntity.BoolValueN) => (bool?)dr.GetBooleanOrNull(idx++),
            _ => throw new StormException($"'{propertyName}' is not a column of the table")
        };
    }

    /// <inheritdoc />
    public override object CreateDetailRow(StormColumnDef column, StormDbDataReader dr, ref int idx)
    {
        throw new StormException($"'{column.PropertyName}' is not a details list");
    }

    /// <summary>
    /// Array of StormColumnDef objects representing the column definitions.
    /// </summary>
    internal static readonly StormColumnDef[] __columnDefs =
    {
        new(nameof(SqlWhereTestEntity.StringColor), null, "StringColor", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.String, 16, 0, 0, SaveAs.String, 0, false, null, null, typeof(AltaSoft.Storm.TestModels.RgbColor), null),
        new(nameof(SqlWhereTestEntity.IntColor), null, "IntColor", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.Int8, 0, 0, 0, SaveAs.Default, 0, false, null, null, typeof(AltaSoft.Storm.TestModels.RgbColor), null),
        new(nameof(SqlWhereTestEntity.IntColorN), null, "IntColorN", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.Int8, 0, 0, 0, SaveAs.Default, 0, true, null, null, typeof(AltaSoft.Storm.TestModels.RgbColor), null),
        new(nameof(SqlWhereTestEntity.CustomerId), null, "CustomerId", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.Int64, 0, 0, 0, SaveAs.Default, 0, false, null, null, typeof(AltaSoft.Storm.TestModels.VeryBadNamespace.CustomerId), null),
        new(nameof(SqlWhereTestEntity.CustomerIdN), null, "CustomerIdN", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.Int64, 0, 0, 0, SaveAs.Default, 0, true, null, null, typeof(AltaSoft.Storm.TestModels.VeryBadNamespace.CustomerId), null),
        new(nameof(SqlWhereTestEntity.IntValue), null, "IntValue", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.Int32, 0, 0, 0, SaveAs.Default, 0, false, null, null, typeof(int), null),
        new(nameof(SqlWhereTestEntity.IntValueN), null, "IntValueN", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.Int32, 0, 0, 0, SaveAs.Default, 0, true, null, null, typeof(int), null),
        new(nameof(SqlWhereTestEntity.StringName), null, "StringName", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.String, -1, 0, 0, SaveAs.Default, 0, true, null, null, typeof(string), null),
        new(nameof(SqlWhereTestEntity.StringNameN), null, "StringNameN", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.String, -1, 0, 0, SaveAs.Default, 0, true, null, null, typeof(string), null),
        new(nameof(SqlWhereTestEntity.Ccy), null, "Ccy", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.String, -1, 0, 0, SaveAs.Default, 0, false, null, null, typeof(AltaSoft.Storm.TestModels.VeryBadNamespace.CurrencyId), null),
        new(nameof(SqlWhereTestEntity.CcyN), null, "CcyN", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.String, -1, 0, 0, SaveAs.Default, 0, true, null, null, typeof(AltaSoft.Storm.TestModels.VeryBadNamespace.CurrencyId), null),
        new(nameof(SqlWhereTestEntity.BoolValue), null, "BoolValue", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.Boolean, 0, 0, 0, SaveAs.Default, 0, false, null, null, typeof(bool), null),
        new(nameof(SqlWhereTestEntity.BoolValueN), null, "BoolValueN", StormColumnFlags.CanSelect | StormColumnFlags.CanInsert | StormColumnFlags.CanUpdate, UnifiedDbType.Boolean, 0, 0, 0, SaveAs.Default, 0, true, null, null, typeof(bool), null)
    };

    /// <summary>
    /// Array of StormColumnDef objects representing the key column definitions.
    /// </summary>
    internal static readonly StormColumnDef[][] __keyColumnDefs = [
        [  ] // PK
    ];

    /// <inheritdoc />
    public override StormColumnDef[] ColumnDefs => __columnDefs;

    /// <inheritdoc />
    public override StormColumnDef[][] KeyColumnDefs => __keyColumnDefs;

    /// <inheritdoc />
    public override bool HasConcurrencyCheck => false;
    /// <inheritdoc />
    public override uint PartialLoadFlagsAll => 0;
    /// <inheritdoc />
    public override uint PartialLoadFlagsAllWithoutDetails => 0;
    /// <inheritdoc />
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public override StormColumnDef? __GetAutoIncColumn() => null;

}

/// <summary>
/// StormContext methods
/// </summary>
public static partial class TestStormContextSqlWhereTestEntityExt
{
    /// <summary>
    /// Select row(s)
    /// </summary>
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static ISelectFrom<SqlWhereTestEntity, SqlWhereTestEntity.OrderBy, SqlWhereTestEntity.PartialLoadFlags> SelectFromSqlWhereTestEntity(this TestStormContext context) => StormCrudFactory.SelectFrom<SqlWhereTestEntity, SqlWhereTestEntity.OrderBy, SqlWhereTestEntity.PartialLoadFlags>(context, 0);
    /// <summary>
    /// Delete row(s)
    /// </summary>
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static IDeleteFrom<SqlWhereTestEntity> DeleteFromSqlWhereTestEntity(this TestStormContext context) => StormCrudFactory.DeleteFrom<SqlWhereTestEntity>(context, 0);
    /// <summary>
    /// Insert row(s)
    /// </summary>
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static IInsertInto<SqlWhereTestEntity> InsertIntoSqlWhereTestEntity(this TestStormContext context) => StormCrudFactory.InsertInto<SqlWhereTestEntity>(context, 0);
    /// <summary>
    /// Update row(s)
    /// </summary>
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static IUpdateFrom<SqlWhereTestEntity> UpdateSqlWhereTestEntity(this TestStormContext context) => StormCrudFactory.UpdateFrom<SqlWhereTestEntity>(context, 0);
    /// <summary>
    /// Merge row(s)
    /// </summary>
    [MethodImpl(MethodImplOptions.AggressiveInlining)]
    public static IMergeInto<SqlWhereTestEntity> MergeIntoSqlWhereTestEntity(this TestStormContext context) => StormCrudFactory.MergeInto<SqlWhereTestEntity>(context, 0);
}
